<!DOCTYPE html>
<html>
    <head>
        <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
        <meta content="utf-8" http-equiv="encoding">
        <meta name="viewport" content="width=device-width">
        <link rel="stylesheet" href="public/css/styles.css">
        <script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.min.js" defer></script>
        <script src="https://kit.fontawesome.com/04e1fd1e9c.js" crossorigin="anonymous"></script>
    </head>
    <body lang="en">
        <div class="wrapper m-4 md:m-16 lg:m-24 xl:m-32" x-data="createPetFetcher()" x-init="() => {initialize()}">
            <div class="flex flex-row">
                <div id="pet-filter" class="m-3">
                    <select x-model="data.filter.selected" x-on:change="filterPets()">
                        <option value="" selected hidden>Filter</option>
                        <template x-for="option in data.filter.options">
                            <option :key="option.value" :value="option.value" x-text="option.label"></option>
                        </template>
                    </select>
                    <span class="filter-focus"></span>
                </div>
                <button @click="resetFilter()" class="text-blue">Reset Filter</button>
            </div>
            <div id="pet-list-wrapper" class="w-full flex flex-row flex-wrap">
                <template x-for="pet in data.petsShow" :key="pet.pet_id">
                    <div class="aap-card w-full md:w-1/3 lg:w-1/3 xl:w-1/3 xl:max-w-md relative">
                        <div class="absolute top-0 right-0 z-10 text-xl flex flex-col p-4">
                            <div class="flex flex-col h-12">
                                <div class="relative flex-1">
                                    <i class="far fa-heart text-black absolute top-0 right-0"></i>
                                    <i class="fas fa-heart text-white opacity-50 hover:opacity-75 absolute top-0 right-0"></i>
                                </div>
                                <i class="fas fa-info-circle text-darkGrey md:text-white lg:text-white xl:text-white opacity-50 hover:opacity-75"></i>
                            </div>
                        </div>
                        <div class="aap-pet-card flex flex-row md:flex-col lg:flex-col xl:flex-col m-3 h-32 md:h-auto lg:h-auto xl:h-auto">
                            <div class="w-5/12 md:w-full lg:w-full xl:w-full relative flex justify-center">
                                <div x-show="pet.adopted" class="w-full absolute bottom-0 bg-blue text-center">
                                    <span class="font-bold text-white">Adopted</span>
                                </div>
                                <div x-show="pet.act_quickly" class="w-full absolute bottom-0 bg-yellow text-center">
                                    <span class="font-bold">Act Quickly</span>
                                </div>
                                <img :src="pet.large_results_photo_url" class="w-auto h-full md:w-full lg:w-full xl:-w-full" />
                            </div>
                            <div class="flex flex-col w-7/12 md:w-full lg:w-full xl:w-full">
                                <div class="flex flex-col mx-4 my-2">
                                    <h1 x-text="pet.pet_name" class="text-blue font-bold font text-xl md:text-2xl lg:text-2xl xl:text-2xl line-height-normal"></h1>
                                    <div class="flex flex-row">
                                        <h2 x-show="pet.secondary_breed" x-text="pet.primary_breed" class="font-bold whitespace-no-wrap overflow-hidden ellipsis breed-cutoff"></h2>
                                        <h2 x-show="!pet.secondary_breed" x-text="pet.primary_breed" class="font-bold whitespace-no-wrap overflow-hidden ellipsis"></h2>
                                        <div x-show="pet.secondary_breed" class="flex flex-row whitespace-no-wrap overflow-hidden ellipsis">
                                            <h2 class="font-bold">/</h2>
                                            <h2 x-text="pet.secondary_breed" class="font-bold"></h2>
                                        </div>
                                    </div>
                                </div>
                                <div class="flex flex-col mx-4 my-2 h-16">
                                    <div class="line-height-normal">
                                        <span x-show="pet.sex" x-text="pet.sex"></span>
                                        <span x-show="pet.age" class="mr-1 -ml-1">,</span>
                                        <span x-show="pet.age" x-text="pet.age"></span>
                                        <span x-show="pet.special_needs === 1" class="mr-1 -ml-1">,</span>
                                        <span x-show="pet.special_needs === 1" class="text-coral">Special needs</span>
                                    </div>
                                    <div x-show="pet.special_needs !== 1">
                                        <span x-text="pet.city"></span>
                                        <span x-show="pet.state" class="mr-1 -ml-1">,</span>
                                        <span x-text="pet.state"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </template>
            </div>
        </div>

        <script src="./src/client/fetch.js"></script>
    </body>
</html>
